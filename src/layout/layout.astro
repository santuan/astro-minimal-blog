---
import ViewTransitions from 'astro/components/ViewTransitions.astro'
import Nav from '../components/navbar/nav.astro'
import SpeedInsights from '@vercel/speed-insights/astro'

interface Props {
	title?: string
	showNav?: boolean
}
const { title = 'Astro minial blog' } = Astro.props
---

<html lang='en' data-theme='dracula'>
	<head>
		<meta charset='UTF-8' />
		<meta name='viewport' content='width=device-width' />
		<title>{title}</title>
		<link rel='icon' href='/favicon.svg' />
		<meta
			name='description'
			content='This repository is a minimalistic blog built with Astro, leveraging Astro DB, Lucia Auth, and the actions-manager library. It is deployed on Vercel for seamless hosting.'
		/>
		<meta name='author' content='Maximiliano Biondo' />
		<meta name='tags' content='astro, blog, minimal' />
		<meta name='keywords' content='astro, blog, minimal, astro db, typescript, actions manager' />
		<ViewTransitions />
		<SpeedInsights />
	</head>
	<body class='min-h-screen'>
		<div class='drawer'>
			<input id='main-drawer' type='checkbox' class='drawer-toggle' />
			<div class='drawer-content flex flex-col'>
				<Nav />
				<main class='flex-1 max-w-full'>
					<!-- Page content -->

					<slot />
				</main>
			</div>
			<div class='drawer-side'>
				<label for='main-drawer' aria-label='close sidebar' class='drawer-overlay'></label>
				<ul class='menu bg-base-200 min-h-full w-80 p-4' id='toc-mobile'></ul>
			</div>
		</div>
	</body>
</html>
<script>
	import { syntaxHighlighting } from '@lib/mdx/syntax-highlighting'
	import { tocCreator } from '@lib/mdx/toc-creator'
	tocCreator()
	syntaxHighlighting()
	document.addEventListener('astro:after-swap', () => {
		tocCreator()
		syntaxHighlighting()
	})
</script>
